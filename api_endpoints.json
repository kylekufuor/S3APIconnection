{"openapi":"3.1.0","info":{"title":"AI CSV Converter","description":"AI-powered CSV to CSV converter using CrewAI agents","version":"0.1.0"},"paths":{"/api/v1/upload":{"post":{"tags":["CSV Converter"],"summary":"Upload a CSV file","description":"Upload an input CSV or expected output CSV file for processing","operationId":"upload_file_api_v1_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_file_api_v1_upload_post"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/convert":{"post":{"tags":["CSV Converter"],"summary":"Start CSV conversion job","description":"Start a new CSV conversion job with uploaded input and expected output files","operationId":"start_conversion_job_api_v1_convert_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionJobRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionJobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs/{job_id}/status":{"get":{"tags":["CSV Converter"],"summary":"Get job status","description":"Get the current status and progress of a conversion job","operationId":"get_job_status_api_v1_jobs__job_id__status_get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs/{job_id}/result":{"get":{"tags":["CSV Converter"],"summary":"Get job result","description":"Get the final result of a completed conversion job","operationId":"get_job_result_api_v1_jobs__job_id__result_get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs":{"get":{"tags":["CSV Converter"],"summary":"List all jobs","description":"Get a list of all conversion jobs","operationId":"list_jobs_api_v1_jobs_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/JobStatusResponse"},"type":"array","title":"Response List Jobs Api V1 Jobs Get"}}}}}}},"/api/v1/jobs/{job_id}":{"delete":{"tags":["CSV Converter"],"summary":"Delete a job","description":"Delete a conversion job and its associated files","operationId":"delete_job_api_v1_jobs__job_id__delete","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inference":{"post":{"tags":["CSV Converter"],"summary":"Start inference job","description":"Start an inference job using a previously trained model for a client","operationId":"start_inference_job_api_v1_inference_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceJobRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionJobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users":{"get":{"tags":["CSV Converter"],"summary":"List all users","description":"Get a list of all users who have trained models","operationId":"list_users_api_v1_users_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListUsersResponse"}}}}}}},"/api/v1/users/{client_id}/scripts":{"get":{"tags":["CSV Converter"],"summary":"List user scripts","description":"Get all scripts for a specific user, sorted by creation time","operationId":"list_user_scripts_api_v1_users__client_id__scripts_get","parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Client Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListUserScriptsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs/{job_id}/inference-result":{"get":{"tags":["CSV Converter"],"summary":"Get inference result","description":"Get the final result of a completed inference job including output CSV","operationId":"get_inference_result_api_v1_jobs__job_id__inference_result_get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"tags":["Root"],"summary":"Root","description":"Root endpoint - redirects to API documentation.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Check Health Get"}}}}}}}},"components":{"schemas":{"AgentExecutionResult":{"properties":{"agent_name":{"type":"string","title":"Agent Name"},"success":{"type":"boolean","title":"Success"},"output":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Output"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"execution_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Execution Time"}},"type":"object","required":["agent_name","success"],"title":"AgentExecutionResult","description":"Result from an individual agent execution."},"Body_upload_file_api_v1_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"CSV file to upload"},"file_type":{"type":"string","title":"File Type","description":"Type of file: 'input' or 'expected_output'"}},"type":"object","required":["file","file_type"],"title":"Body_upload_file_api_v1_upload_post"},"ConversionJobRequest":{"properties":{"input_filename":{"type":"string","title":"Input Filename"},"expected_output_filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Output Filename"},"job_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Description","description":"Optional description of the conversion task"},"general_instructions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"General Instructions","description":"General transformation instructions and data processing rules"},"column_instructions":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Column Instructions","description":"Column-specific transformation instructions"},"client_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Client Id","description":"Optional client ID for user-specific training"},"mode":{"$ref":"#/components/schemas/OperationMode","description":"Operation mode: training or inference","default":"training"},"use_full_paths":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Use Full Paths","description":"If True, treat filenames as full paths instead of upload_dir relative","default":false},"input_file_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Input File Path","description":"Full path to input file (when use_full_paths=True)"},"expected_output_file_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Output File Path","description":"Full path to expected output file (when use_full_paths=True)"}},"type":"object","required":["input_filename"],"title":"ConversionJobRequest","description":"Request model for starting a CSV conversion job."},"ConversionJobResponse":{"properties":{"job_id":{"type":"string","format":"uuid","title":"Job Id"},"status":{"$ref":"#/components/schemas/JobStatus","default":"pending"},"input_file":{"type":"string","title":"Input File"},"expected_output_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Output File"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"client_id":{"type":"string","format":"uuid","title":"Client Id"},"mode":{"$ref":"#/components/schemas/OperationMode"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"message":{"type":"string","title":"Message"}},"type":"object","required":["input_file","client_id","mode","message"],"title":"ConversionJobResponse","description":"Response model for conversion job creation."},"ConversionResult":{"properties":{"job_id":{"type":"string","format":"uuid","title":"Job Id"},"status":{"$ref":"#/components/schemas/JobStatus"},"success":{"type":"boolean","title":"Success"},"generated_script":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Generated Script"},"test_results":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Test Results"},"agent_results":{"items":{"$ref":"#/components/schemas/AgentExecutionResult"},"type":"array","title":"Agent Results","default":[]},"created_at":{"type":"string","format":"date-time","title":"Created At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"inference_output":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Inference Output"}},"type":"object","required":["job_id","status","success","created_at"],"title":"ConversionResult","description":"Final result of the CSV conversion process."},"FileUploadResponse":{"properties":{"filename":{"type":"string","title":"Filename"},"file_size":{"type":"integer","title":"File Size"},"upload_path":{"type":"string","title":"Upload Path"},"message":{"type":"string","title":"Message"}},"type":"object","required":["filename","file_size","upload_path","message"],"title":"FileUploadResponse","description":"Response model for file upload."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InferenceJobRequest":{"properties":{"input_filename":{"type":"string","title":"Input Filename"},"client_id":{"type":"string","format":"uuid","title":"Client Id","description":"Required client ID to identify the user's trained model"},"job_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Description","description":"Optional description of the inference task"}},"type":"object","required":["input_filename","client_id"],"title":"InferenceJobRequest","description":"Request model for starting an inference job."},"JobStatus":{"type":"string","enum":["pending","planning","coding","testing","completed","failed"],"title":"JobStatus","description":"Status of a CSV conversion job."},"JobStatusResponse":{"properties":{"job_id":{"type":"string","format":"uuid","title":"Job Id"},"status":{"$ref":"#/components/schemas/JobStatus"},"input_file":{"type":"string","title":"Input File"},"expected_output_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Output File"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"client_id":{"type":"string","format":"uuid","title":"Client Id"},"mode":{"$ref":"#/components/schemas/OperationMode"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"current_step":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Step"},"progress_details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Progress Details"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["job_id","status","input_file","client_id","mode","created_at","updated_at"],"title":"JobStatusResponse","description":"Response model for job status queries."},"ListUserScriptsResponse":{"properties":{"client_id":{"type":"string","format":"uuid","title":"Client Id"},"scripts":{"items":{"$ref":"#/components/schemas/UserScriptInfo"},"type":"array","title":"Scripts"},"latest_script":{"anyOf":[{"$ref":"#/components/schemas/UserScriptInfo"},{"type":"null"}]}},"type":"object","required":["client_id","scripts"],"title":"ListUserScriptsResponse","description":"Response model for listing user scripts."},"ListUsersResponse":{"properties":{"users":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Users"},"total_count":{"type":"integer","title":"Total Count"}},"type":"object","required":["users","total_count"],"title":"ListUsersResponse","description":"Response model for listing users."},"OperationMode":{"type":"string","enum":["training","inference"],"title":"OperationMode","description":"Operation mode for the CSV converter."},"UserScriptInfo":{"properties":{"script_name":{"type":"string","title":"Script Name"},"client_id":{"type":"string","format":"uuid","title":"Client Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"file_path":{"type":"string","title":"File Path"},"job_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Job Id"}},"type":"object","required":["script_name","client_id","created_at","file_path"],"title":"UserScriptInfo","description":"Information about a user's generated script."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}